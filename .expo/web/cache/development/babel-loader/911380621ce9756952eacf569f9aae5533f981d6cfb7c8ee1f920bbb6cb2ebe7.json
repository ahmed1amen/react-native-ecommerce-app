{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.withAddToCart = withAddToCart;\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _merge = _interopRequireDefault(require(\"lodash/merge\"));\nvar _useBoolean3 = require(\"/home/ahmed/Music/softtag/Source Code/src/utils/use-boolean\");\nvar _actions = require(\"/home/ahmed/Music/softtag/Source Code/src/modules/cart/actions\");\nvar _reactNativeFlashMessage = require(\"react-native-flash-message\");\nvar _navigator = require(\"/home/ahmed/Music/softtag/Source Code/src/config/navigator\");\nvar _jsxFileName = \"/home/ahmed/Music/softtag/Source Code/src/hoc/hoc-add-to-card.js\";\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\nfunction withAddToCart(WrappedComponent) {\n  function reducer(state, action) {\n    switch (action.type) {\n      case 'reset':\n        return action.payload;\n      case 'select_variation':\n        return (0, _extends2.default)({}, state, {\n          variation_id: action.payload\n        });\n      case 'update_variation':\n        return (0, _extends2.default)({}, state, {\n          variation: action.payload\n        });\n      default:\n        throw new Error();\n    }\n  }\n  return function Cart(props) {\n    var initialState = {\n      quantity: 1,\n      variation_id: 0,\n      variation: [],\n      cart_item_data: {}\n    };\n    var _useReducer = (0, _react.useReducer)(reducer, initialState),\n      _useReducer2 = (0, _slicedToArray2.default)(_useReducer, 2),\n      state = _useReducer2[0],\n      dispatch = _useReducer2[1];\n    var _useBoolean = (0, _useBoolean3.useBoolean)(false),\n      _useBoolean2 = (0, _slicedToArray2.default)(_useBoolean, 2),\n      loading = _useBoolean2[0],\n      _useBoolean2$ = _useBoolean2[1],\n      setTrue = _useBoolean2$.setTrue,\n      setFalse = _useBoolean2$.setFalse;\n    var callBack = function callBack(payload) {\n      var cb = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};\n      setFalse();\n      dispatch({\n        type: 'reset',\n        payload: initialState\n      });\n      if (!payload.success) {\n        (0, _reactNativeFlashMessage.showMessage)({\n          message: payload.error.message,\n          type: 'danger'\n        });\n      } else {\n        (0, _reactNativeFlashMessage.showMessage)({\n          message: 'Add to cart successfully!',\n          type: 'success'\n        });\n        cb();\n      }\n    };\n    var addCart = function addCart(id) {\n      var cb = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};\n      var quantity = state.quantity,\n        variation_id = state.variation_id,\n        cart_item_data = state.cart_item_data,\n        variation = state.variation;\n      var dataVariation = {};\n      variation.map(function (value) {\n        var nameAttr = \"attribute_\" + value.key;\n        dataVariation[nameAttr] = value.option;\n      });\n      setTrue();\n      props.dispatch((0, _actions.addToCart)({\n        product_id: id,\n        quantity: quantity,\n        variation_id: variation_id,\n        cart_item_data: cart_item_data,\n        variation: dataVariation\n      }, function (data) {\n        return callBack(data, cb);\n      }));\n    };\n    var selectVariation = function selectVariation(id) {\n      dispatch({\n        type: 'select_variation',\n        payload: id\n      });\n    };\n    var updateMetaVariation = function updateMetaVariation(variation) {\n      dispatch({\n        type: 'update_variation',\n        payload: variation\n      });\n    };\n    return _react.default.createElement(WrappedComponent, (0, _extends2.default)({}, props, {\n      loading: loading,\n      addCart: addCart,\n      selectVariation: selectVariation,\n      updateMetaVariation: updateMetaVariation,\n      state: state,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 7\n      }\n    }));\n  };\n}","map":{"version":3,"names":["_react","_interopRequireWildcard","require","_merge","_interopRequireDefault","_useBoolean3","_actions","_reactNativeFlashMessage","_navigator","_jsxFileName","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","withAddToCart","WrappedComponent","reducer","state","action","type","payload","_extends2","variation_id","variation","Error","Cart","props","initialState","quantity","cart_item_data","_useReducer","useReducer","_useReducer2","_slicedToArray2","dispatch","_useBoolean","useBoolean","_useBoolean2","loading","_useBoolean2$","setTrue","setFalse","callBack","cb","arguments","length","undefined","success","showMessage","message","error","addCart","id","dataVariation","map","value","nameAttr","option","addToCart","product_id","data","selectVariation","updateMetaVariation","createElement","__self","__source","fileName","lineNumber","columnNumber"],"sources":["/home/ahmed/Music/softtag/Source Code/src/hoc/hoc-add-to-card.js"],"sourcesContent":["import React, {useReducer} from 'react';\n\nimport merge from 'lodash/merge';\nimport {useBoolean} from 'src/utils/use-boolean';\nimport {addToCart} from 'src/modules/cart/actions';\nimport {showMessage} from 'react-native-flash-message';\n\nimport {homeTabs, mainStack} from 'src/config/navigator';\n\n/**\n * HOC for handle add to cart action\n * @param WrappedComponent\n * @return {function(*): *}\n */\nexport function withAddToCart(WrappedComponent) {\n  /**\n   * Cart reducer for product item\n   * @param state\n   * @param action\n   * @return {{cart_item_data: *}|*|{quantity: number}|{quantity: *}}\n   */\n  function reducer(state, action) {\n    switch (action.type) {\n      case 'reset':\n        return action.payload;\n      case 'select_variation':\n        return {\n          ...state,\n          variation_id: action.payload,\n        };\n      case 'update_variation':\n        return {\n          ...state,\n          variation: action.payload,\n        };\n      default:\n        throw new Error();\n    }\n  }\n\n  return function Cart(props) {\n    /**\n     * Init cart state\n     * @type {{quantity: number, variation_id: number, cart_item_data: {}, variation: []}}\n     */\n    const initialState = {\n      quantity: 1,\n      variation_id: 0,\n      variation: [],\n      cart_item_data: {},\n    };\n\n    const [state, dispatch] = useReducer(reducer, initialState);\n    const [loading, {setTrue, setFalse}] = useBoolean(false);\n\n    /**\n     * Function call back after adding to cart\n     * @param payload\n     * @param type\n     */\n    const callBack = (payload, cb = () => {}) => {\n      setFalse();\n      dispatch({type: 'reset', payload: initialState});\n\n      // Show notification error\n      if (!payload.success) {\n        // props.navigation.navigate(rootSwitch.auth);\n        // Show message if false add to cart\n        showMessage({\n          message: payload.error.message,\n          type: 'danger',\n        });\n      } else {\n        showMessage({\n          message: 'Add to cart successfully!',\n          type: 'success',\n        });\n        cb();\n      }\n    };\n\n    /**\n     * Add to cart action\n     * @param id : product id\n     */\n    const addCart = (id, cb = () => {}) => {\n      const {quantity, variation_id, cart_item_data, variation} = state;\n      var dataVariation = {};\n      variation.map(value => {\n        const nameAttr = `attribute_${value.key}`;\n        dataVariation[nameAttr] = value.option;\n      });\n      setTrue();\n      props.dispatch(\n        addToCart(\n          {\n            product_id: id,\n            quantity,\n            variation_id,\n            cart_item_data,\n            variation: dataVariation,\n          },\n          data => callBack(data, cb),\n        ),\n      );\n    };\n\n    /**\n     * Selection variation id\n     * @param id : variation_id\n     */\n    const selectVariation = id => {\n      dispatch({type: 'select_variation', payload: id});\n    };\n\n    /**\n     * Update variation\n     * @param variation\n     */\n    const updateMetaVariation = variation => {\n      dispatch({type: 'update_variation', payload: variation});\n    };\n\n    return (\n      <WrappedComponent\n        {...props}\n        loading={loading}\n        addCart={addCart}\n        selectVariation={selectVariation}\n        updateMetaVariation={updateMetaVariation}\n        state={state}\n      />\n    );\n  };\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}