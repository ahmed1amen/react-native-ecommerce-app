{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.dataReviewSelector = exports.dataRatingSelector = exports.recentSearch = exports.priceRangesSelector = exports.attributeSelector = exports.filterBySelector = exports.sortBySelector = exports.dataWishListSelector = exports.loadingWishListSelector = exports.product = void 0;\nvar _reselect = require(\"reselect\");\nvar _immutable = require(\"immutable\");\nvar _round = _interopRequireDefault(require(\"lodash/round\"));\nvar _product = require(\"/home/ahmed/Music/softtag/Source Code/src/utils/product\");\nvar _selectors = require(\"/home/ahmed/Music/softtag/Source Code/src/modules/common/selectors\");\nvar product = function product(state) {\n  return state.product;\n};\nexports.product = product;\nvar loadingWishListSelector = (0, _reselect.createSelector)(product, function (data) {\n  return data.getIn(['wish', 'loading']);\n});\nexports.loadingWishListSelector = loadingWishListSelector;\nvar dataWishListSelector = (0, _reselect.createSelector)(function (state) {\n  return state.product.getIn(['wish', 'data']);\n}, _selectors.currencySelector, _selectors.defaultCurrencySelector, function (data, currency, defaultCurrency) {\n  if (data) {\n    var prepareData = data.map(function (item) {\n      return (0, _product.prepareProductItem)(item, currency, defaultCurrency);\n    });\n    return prepareData;\n  }\n  return (0, _immutable.fromJS)([]);\n});\nexports.dataWishListSelector = dataWishListSelector;\nvar sortBySelector = (0, _reselect.createSelector)(product, function (data) {\n  return data.get('sortBy');\n});\nexports.sortBySelector = sortBySelector;\nvar filterBySelector = (0, _reselect.createSelector)(product, function (data) {\n  return data.get('filterBy');\n});\nexports.filterBySelector = filterBySelector;\nvar attributeSelector = (0, _reselect.createSelector)(product, function (data) {\n  return data.get('attribute');\n});\nexports.attributeSelector = attributeSelector;\nvar priceRangesSelector = (0, _reselect.createSelector)(function (state) {\n  return state.product.get('data');\n}, function (state) {\n  return state.product.getIn(['filterBy', 'min']);\n}, function (state) {\n  return state.product.getIn(['filterBy', 'max']);\n}, function (data, min, max) {\n  var productMin = data && data.size && data.minBy(function (value) {\n    return value.get('price');\n  }) ? data.minBy(function (value) {\n    return parseFloat(value.get('price') || '0');\n  }) : null;\n  var productMax = data && data.size && data.maxBy(function (value) {\n    return value.get('price');\n  }) ? data.maxBy(function (value) {\n    return parseFloat(value.get('price') || '0');\n  }) : null;\n  var minBy = productMin ? productMin.get('price') : '0';\n  var maxBy = productMax ? productMax.get('price') : (parseFloat(minBy) + 99).toString();\n  return {\n    min: min ? min : minBy,\n    max: max ? max : maxBy\n  };\n});\nexports.priceRangesSelector = priceRangesSelector;\nvar recentSearch = (0, _reselect.createSelector)(function (state) {\n  return state.product.get('recent');\n}, function (data) {\n  return data.toJS();\n});\nexports.recentSearch = recentSearch;\nvar dataRatingSelector = (0, _reselect.createSelector)(function (state) {\n  return state.product.get('reviews');\n}, function (data) {\n  var objRating = data.get('resultType');\n  var lists = [];\n  var totalRating = 0;\n  var totalVoting = 0;\n  objRating.mapKeys(function (value) {\n    var numberRatingType = objRating.get(value) ? objRating.get(value) : 0;\n    totalVoting = totalVoting + numberRatingType;\n    totalRating = totalRating + parseInt(value, 10) * numberRatingType;\n    lists.push({\n      key: parseInt(value, 10),\n      value: numberRatingType\n    });\n  });\n  var rating = totalVoting ? parseFloat(totalRating / totalVoting) : 0;\n  return {\n    lists: lists,\n    rating: (0, _round.default)(rating, 1),\n    total: totalVoting\n  };\n});\nexports.dataRatingSelector = dataRatingSelector;\nvar dataReviewSelector = (0, _reselect.createSelector)(function (state) {\n  return state.product.get('reviews');\n}, function (data) {\n  return data;\n});\nexports.dataReviewSelector = dataReviewSelector;","map":{"version":3,"names":["_reselect","require","_immutable","_round","_interopRequireDefault","_product","_selectors","product","state","exports","loadingWishListSelector","createSelector","data","getIn","dataWishListSelector","currencySelector","defaultCurrencySelector","currency","defaultCurrency","prepareData","map","item","prepareProductItem","fromJS","sortBySelector","get","filterBySelector","attributeSelector","priceRangesSelector","min","max","productMin","size","minBy","value","parseFloat","productMax","maxBy","toString","recentSearch","toJS","dataRatingSelector","objRating","lists","totalRating","totalVoting","mapKeys","numberRatingType","parseInt","push","key","rating","round","total","dataReviewSelector"],"sources":["/home/ahmed/Music/softtag/Source Code/src/modules/product/selectors.js"],"sourcesContent":["import {createSelector} from 'reselect';\nimport {fromJS} from 'immutable';\nimport round from 'lodash/round';\nimport {prepareProductItem} from 'src/utils/product';\n\nimport {\n  currencySelector,\n  defaultCurrencySelector,\n} from 'src/modules/common/selectors';\n\nexport const product = state => state.product;\n\n// Wish list products selector\nexport const loadingWishListSelector = createSelector(product, data =>\n  data.getIn(['wish', 'loading']),\n);\n\nexport const dataWishListSelector = createSelector(\n  state => state.product.getIn(['wish', 'data']),\n  currencySelector,\n  defaultCurrencySelector,\n  (data, currency, defaultCurrency) => {\n    if (data) {\n      // no need get days in prepareProductItem\n      const prepareData = data.map(item =>\n        prepareProductItem(item, currency, defaultCurrency),\n      );\n      return prepareData;\n    }\n\n    return fromJS([]);\n  },\n);\n\n// Select sortBy\nexport const sortBySelector = createSelector(product, data =>\n  data.get('sortBy'),\n);\n\n// Select filterBy\nexport const filterBySelector = createSelector(product, data =>\n  data.get('filterBy'),\n);\n\n// Select attribute\nexport const attributeSelector = createSelector(product, data =>\n  data.get('attribute'),\n);\n\n// Select price ranges\nexport const priceRangesSelector = createSelector(\n  state => state.product.get('data'),\n  state => state.product.getIn(['filterBy', 'min']),\n  state => state.product.getIn(['filterBy', 'max']),\n  (data, min, max) => {\n    const productMin =\n      data && data.size && data.minBy(value => value.get('price'))\n        ? data.minBy(value => parseFloat(value.get('price') || '0'))\n        : null;\n    const productMax =\n      data && data.size && data.maxBy(value => value.get('price'))\n        ? data.maxBy(value => parseFloat(value.get('price') || '0'))\n        : null;\n    const minBy = productMin ? productMin.get('price') : '0';\n    const maxBy = productMax\n      ? productMax.get('price')\n      : (parseFloat(minBy) + 99).toString();\n    return {\n      min: min ? min : minBy,\n      max: max ? max : maxBy,\n    };\n  },\n);\n\n// Select Recent search\nexport const recentSearch = createSelector(\n  state => state.product.get('recent'),\n  data => data.toJS(),\n);\n\n// Get rating\nexport const dataRatingSelector = createSelector(\n  state => state.product.get('reviews'),\n  data => {\n    const objRating = data.get('resultType');\n    let lists = [];\n    let totalRating = 0;\n    let totalVoting = 0;\n\n    objRating.mapKeys(value => {\n      const numberRatingType = objRating.get(value) ? objRating.get(value) : 0;\n      totalVoting = totalVoting + numberRatingType;\n      totalRating = totalRating + parseInt(value, 10) * numberRatingType;\n      lists.push({\n        key: parseInt(value, 10),\n        value: numberRatingType,\n      });\n    });\n    const rating = totalVoting ? parseFloat(totalRating / totalVoting) : 0;\n    return {\n      lists: lists,\n      rating: round(rating, 1),\n      total: totalVoting,\n    };\n  },\n);\n\n// Get review\nexport const dataReviewSelector = createSelector(\n  state => state.product.get('reviews'),\n  data => data,\n);\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}