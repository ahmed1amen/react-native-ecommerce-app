{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createAnimatedEvent = createAnimatedEvent;\nexports.default = void 0;\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\nvar _reactNative = require(\"react-native\");\nvar _ReanimatedModule = _interopRequireDefault(require(\"../ReanimatedModule\"));\nvar _AnimatedNode2 = _interopRequireDefault(require(\"./AnimatedNode\"));\nvar _AnimatedValue = _interopRequireDefault(require(\"./AnimatedValue\"));\nvar _AnimatedAlways = require(\"./AnimatedAlways\");\nvar _invariant = _interopRequireDefault(require(\"fbjs/lib/invariant\"));\nvar _createEventObjectProxyPolyfill = _interopRequireDefault(require(\"./createEventObjectProxyPolyfill\"));\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction sanitizeArgMapping(argMapping) {\n  var eventMappings = [];\n  var alwaysNodes = [];\n  var getNode = function getNode(node) {\n    if (_reactNative.Platform.OS === 'web' || _reactNative.Platform.OS === 'windows' || _reactNative.Platform.OS === 'macos') {\n      return node;\n    }\n    return node.__nodeID;\n  };\n  var traverse = function traverse(value, path) {\n    if (value instanceof _AnimatedValue.default) {\n      eventMappings.push(path.concat(getNode(value)));\n    } else if (typeof value === 'object' && value.__val) {\n      eventMappings.push(path.concat(getNode(value.__val)));\n    } else if (typeof value === 'function') {\n      var node = new _AnimatedValue.default(0);\n      alwaysNodes.push((0, _AnimatedAlways.createAnimatedAlways)(value(node)));\n      eventMappings.push(path.concat(getNode(node)));\n    } else if (typeof value === 'object') {\n      for (var key in value) {\n        traverse(value[key], path.concat(key));\n      }\n    }\n  };\n  (0, _invariant.default)(argMapping[0] && argMapping[0].nativeEvent, 'Native driven events only support animated values contained inside `nativeEvent`.');\n  var ev = argMapping[0].nativeEvent;\n  if (typeof ev === 'object') {\n    traverse(ev, []);\n  } else if (typeof ev === 'function') {\n    var proxyHandler = {\n      get: function get(target, name) {\n        if (name === '__isProxy') {\n          return true;\n        }\n        if (!target[name] && name !== '__val') {\n          target[name] = new Proxy({}, proxyHandler);\n        }\n        return target[name];\n      },\n      set: function set(target, prop, value) {\n        if (prop === '__val') {\n          target[prop] = value;\n          return true;\n        }\n        return false;\n      }\n    };\n    var proxy = typeof Proxy === 'function' ? new Proxy({}, proxyHandler) : (0, _createEventObjectProxyPolyfill.default)();\n    alwaysNodes.push((0, _AnimatedAlways.createAnimatedAlways)(ev(proxy)));\n    traverse(proxy, []);\n  }\n  return {\n    eventMappings: eventMappings,\n    alwaysNodes: alwaysNodes\n  };\n}\nvar AnimatedEvent = function (_AnimatedNode) {\n  (0, _inherits2.default)(AnimatedEvent, _AnimatedNode);\n  var _super = _createSuper(AnimatedEvent);\n  function AnimatedEvent(argMapping) {\n    var _this;\n    var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    (0, _classCallCheck2.default)(this, AnimatedEvent);\n    var _sanitizeArgMapping = sanitizeArgMapping(argMapping),\n      eventMappings = _sanitizeArgMapping.eventMappings,\n      alwaysNodes = _sanitizeArgMapping.alwaysNodes;\n    _this = _super.call(this, {\n      type: 'event',\n      argMapping: eventMappings\n    });\n    _defineProperty((0, _assertThisInitialized2.default)(_this), \"__isNative\", true);\n    _this._alwaysNodes = alwaysNodes;\n    return _this;\n  }\n  (0, _createClass2.default)(AnimatedEvent, [{\n    key: \"toString\",\n    value: function toString() {\n      return \"AnimatedEvent, id: \".concat(this.__nodeID);\n    }\n  }, {\n    key: \"attachEvent\",\n    value: function attachEvent(viewRef, eventName) {\n      for (var i = 0; i < this._alwaysNodes.length; i++) {\n        this._alwaysNodes[i].__attach();\n      }\n      this.__attach();\n      var viewTag = (0, _reactNative.findNodeHandle)(viewRef);\n      _ReanimatedModule.default.attachEvent(viewTag, eventName, this.__nodeID);\n    }\n  }, {\n    key: \"__onEvaluate\",\n    value: function __onEvaluate() {\n      return 0;\n    }\n  }, {\n    key: \"detachEvent\",\n    value: function detachEvent(viewRef, eventName) {\n      for (var i = 0; i < this._alwaysNodes.length; i++) {\n        this._alwaysNodes[i].isNativelyInitialized() && this._alwaysNodes[i].__detach();\n      }\n      var viewTag = (0, _reactNative.findNodeHandle)(viewRef);\n      _ReanimatedModule.default.detachEvent(viewTag, eventName, this.__nodeID);\n      this.__detach();\n    }\n  }]);\n  return AnimatedEvent;\n}(_AnimatedNode2.default);\nexports.default = AnimatedEvent;\nfunction createAnimatedEvent(argMapping, config) {\n  return new AnimatedEvent(argMapping, config);\n}","map":{"version":3,"names":["_reactNative","require","_ReanimatedModule","_interopRequireDefault","_AnimatedNode2","_AnimatedValue","_AnimatedAlways","_invariant","_createEventObjectProxyPolyfill","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf2","default","result","NewTarget","constructor","Reflect","construct","arguments","apply","_possibleConstructorReturn2","sham","Proxy","Boolean","prototype","valueOf","call","e","sanitizeArgMapping","argMapping","eventMappings","alwaysNodes","getNode","node","Platform","OS","__nodeID","traverse","value","path","InternalAnimatedValue","push","concat","__val","createAnimatedAlways","key","invariant","nativeEvent","ev","proxyHandler","get","target","name","set","prop","proxy","createEventObjectProxyPolyfill","AnimatedEvent","_AnimatedNode","_inherits2","_super","_this","config","length","undefined","_classCallCheck2","_sanitizeArgMapping","type","_defineProperty","_assertThisInitialized2","_alwaysNodes","_createClass2","toString","attachEvent","viewRef","eventName","i","__attach","viewTag","findNodeHandle","ReanimatedModule","__onEvaluate","detachEvent","isNativelyInitialized","__detach","AnimatedNode","exports","createAnimatedEvent"],"sources":["/home/ahmed/Music/softtag/Source Code/node_modules/react-native-reanimated/lib/module/core/AnimatedEvent.js"],"sourcesContent":["import { Platform, findNodeHandle } from 'react-native';\nimport ReanimatedModule from '../ReanimatedModule';\n\nimport AnimatedNode from './AnimatedNode';\nimport InternalAnimatedValue from './AnimatedValue';\nimport { createAnimatedAlways } from './AnimatedAlways';\n\nimport invariant from 'fbjs/lib/invariant';\nimport createEventObjectProxyPolyfill from './createEventObjectProxyPolyfill';\n\nfunction sanitizeArgMapping(argMapping) {\n  // Find animated values in `argMapping` and create an array representing their\n  // key path inside the `nativeEvent` object. Ex.: ['contentOffset', 'x'].\n  const eventMappings = [];\n  const alwaysNodes = [];\n\n  const getNode = node => {\n    if (Platform.OS === 'web' || Platform.OS === 'windows' || Platform.OS === 'macos') {\n      return node;\n    }\n    return node.__nodeID;\n  };\n\n  const traverse = (value, path) => {\n    if (value instanceof InternalAnimatedValue) {\n      eventMappings.push(path.concat(getNode(value)));\n    } else if (typeof value === 'object' && value.__val) {\n      eventMappings.push(path.concat(getNode(value.__val)));\n    } else if (typeof value === 'function') {\n      const node = new InternalAnimatedValue(0);\n      alwaysNodes.push(createAnimatedAlways(value(node)));\n      eventMappings.push(path.concat(getNode(node)));\n    } else if (typeof value === 'object') {\n      for (const key in value) {\n        traverse(value[key], path.concat(key));\n      }\n    }\n  };\n\n  invariant(\n    argMapping[0] && argMapping[0].nativeEvent,\n    'Native driven events only support animated values contained inside `nativeEvent`.'\n  );\n\n  // Assume that the event containing `nativeEvent` is always the first argument.\n  const ev = argMapping[0].nativeEvent;\n  if (typeof ev === 'object') {\n    traverse(ev, []);\n  } else if (typeof ev === 'function') {\n    const proxyHandler = {\n      get: function(target, name) {\n        if (name === '__isProxy') {\n          return true;\n        }\n        if (!target[name] && name !== '__val') {\n          target[name] = new Proxy({}, proxyHandler);\n        }\n        return target[name];\n      },\n      set: function(target, prop, value) {\n        if (prop === '__val') {\n          target[prop] = value;\n          return true;\n        }\n        return false;\n      },\n    };\n\n    const proxy =\n      typeof Proxy === 'function'\n        ? new Proxy({}, proxyHandler)\n        : createEventObjectProxyPolyfill();\n    alwaysNodes.push(createAnimatedAlways(ev(proxy)));\n    traverse(proxy, []);\n  }\n\n  return { eventMappings, alwaysNodes };\n}\n\nexport default class AnimatedEvent extends AnimatedNode {\n  constructor(argMapping, config = {}) {\n    const { eventMappings, alwaysNodes } = sanitizeArgMapping(argMapping);\n    super({ type: 'event', argMapping: eventMappings });\n    this._alwaysNodes = alwaysNodes;\n  }\n\n  toString() {\n    return `AnimatedEvent, id: ${this.__nodeID}`;\n  }\n\n  // The below field is a temporary workaround to make AnimatedEvent object be recognized\n  // as Animated.event event callback and therefore filtered out from being send over the\n  // bridge which was causing the object to be frozen in JS.\n  __isNative = true;\n\n  attachEvent(viewRef, eventName) {\n    for (let i = 0; i < this._alwaysNodes.length; i++) {\n      this._alwaysNodes[i].__attach();\n    }\n    this.__attach();\n    const viewTag = findNodeHandle(viewRef);\n    ReanimatedModule.attachEvent(viewTag, eventName, this.__nodeID);\n  }\n\n  __onEvaluate() {\n    return 0;\n  }\n\n  detachEvent(viewRef, eventName) {\n    for (let i = 0; i < this._alwaysNodes.length; i++) {\n      this._alwaysNodes[i].isNativelyInitialized() &&\n        this._alwaysNodes[i].__detach();\n    }\n    const viewTag = findNodeHandle(viewRef);\n    ReanimatedModule.detachEvent(viewTag, eventName, this.__nodeID);\n    this.__detach();\n  }\n}\n\nexport function createAnimatedEvent(argMapping, config) {\n  return new AnimatedEvent(argMapping, config);\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}