{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\nvar _react = _interopRequireDefault(require(\"react\"));\nvar _immutable = require(\"immutable\");\nvar _reactNative = require(\"react-native\");\nvar _components = require(\"/home/ahmed/Music/softtag/Source Code/src/components\");\nvar _AttributeVariable = _interopRequireDefault(require(\"./AttributeVariable\"));\nvar _helper = require(\"/home/ahmed/Music/softtag/Source Code/src/modules/product/helper\");\nvar _spacing = require(\"/home/ahmed/Music/softtag/Source Code/src/components/config/spacing\");\nvar _jsxFileName = \"/home/ahmed/Music/softtag/Source Code/src/screens/shop/product/ProductVariable.js\";\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nvar ProductVariable = function (_React$Component) {\n  (0, _inherits2.default)(ProductVariable, _React$Component);\n  var _super = _createSuper(ProductVariable);\n  function ProductVariable() {\n    var _this;\n    (0, _classCallCheck2.default)(this, ProductVariable);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.handleChange = function (meta_data) {\n      var _this$props = _this.props,\n        productAttributes = _this$props.productAttributes,\n        productVariations = _this$props.productVariations,\n        selectVariation = _this$props.selectVariation,\n        updateMetaVariation = _this$props.updateMetaVariation;\n      var attributes = productAttributes.filter(function (attr) {\n        return attr.get('variation');\n      });\n      if (meta_data.size && attributes.size === meta_data.size) {\n        var find = (0, _helper.findVariation)(productVariations, (0, _helper.prepareMetaData)(meta_data));\n        if (find) {\n          selectVariation(find.get('id'));\n        }\n      }\n      updateMetaVariation(meta_data.toJS());\n    };\n    _this.onClear = function () {\n      var _this$props2 = _this.props,\n        selectVariation = _this$props2.selectVariation,\n        updateMetaVariation = _this$props2.updateMetaVariation;\n      updateMetaVariation([]);\n      selectVariation(0);\n    };\n    _this.onSelectAttribute = function (attribute_id, attribute_name, attribute_key, attribute_option) {\n      var meta_data = _this.props.meta_data;\n      var option = (0, _immutable.Map)({\n        id: attribute_id,\n        name: attribute_name,\n        key: attribute_key,\n        option: attribute_option\n      });\n      var index = meta_data.findIndex(function (attr) {\n        return attr.get('id') === attribute_id && attr.get('name') === attribute_name;\n      });\n      if (index >= 0 && meta_data.includes(option)) {\n        _this.handleChange(meta_data.delete(index));\n      } else if (index >= 0) {\n        _this.handleChange(meta_data.set(index, option));\n      } else {\n        _this.handleChange(meta_data.push(option));\n      }\n    };\n    return _this;\n  }\n  (0, _createClass2.default)(ProductVariable, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n      var _this$props3 = this.props,\n        meta_data = _this$props3.meta_data,\n        productAttributes = _this$props3.productAttributes,\n        productVariations = _this$props3.productVariations,\n        attribute = _this$props3.attribute,\n        loading = _this$props3.loading;\n      if (loading) {\n        return _react.default.createElement(_reactNative.ActivityIndicator, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 14\n          }\n        });\n      }\n      var attributes = (0, _helper.prepareAttributes)(productAttributes.filter(function (attr) {\n        return attr.get('variation');\n      }), attribute, productVariations);\n      return _react.default.createElement(_reactNative.View, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 7\n        }\n      }, attributes.map(function (att, index) {\n        return _react.default.createElement(_reactNative.View, {\n          key: att.get('id') + \"-\" + att.get('position'),\n          style: index < attributes.size - 1 && styles.atr,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 11\n          }\n        }, _react.default.createElement(_AttributeVariable.default, {\n          meta_data: (0, _helper.prepareMetaData)(meta_data),\n          attribute: att,\n          variations: productVariations,\n          onSelectAttribute: _this2.onSelectAttribute,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 13\n          }\n        }));\n      }), _react.default.createElement(_reactNative.TouchableOpacity, {\n        onPress: this.onClear,\n        style: styles.viewClear,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 9\n        }\n      }, _react.default.createElement(_components.Text, {\n        h6: true,\n        colorThird: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }\n      }, \"Clear\")));\n    }\n  }]);\n  return ProductVariable;\n}(_react.default.Component);\nvar styles = _reactNative.StyleSheet.create({\n  viewClear: {\n    position: 'absolute',\n    top: 1,\n    right: 0\n  },\n  atr: {\n    marginBottom: _spacing.margin.large\n  }\n});\nvar _default = ProductVariable;\nexports.default = _default;","map":{"version":3,"names":["_react","_interopRequireDefault","require","_immutable","_reactNative","_components","_AttributeVariable","_helper","_spacing","_jsxFileName","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf2","default","result","NewTarget","constructor","Reflect","construct","arguments","apply","_possibleConstructorReturn2","sham","Proxy","Boolean","prototype","valueOf","call","e","ProductVariable","_React$Component","_inherits2","_super","_this","_classCallCheck2","_len","length","args","Array","_key","concat","handleChange","meta_data","_this$props","props","productAttributes","productVariations","selectVariation","updateMetaVariation","attributes","filter","attr","get","size","find","findVariation","prepareMetaData","toJS","onClear","_this$props2","onSelectAttribute","attribute_id","attribute_name","attribute_key","attribute_option","option","Map","id","name","key","index","findIndex","includes","delete","set","push","_createClass2","value","render","_this2","_this$props3","attribute","loading","createElement","ActivityIndicator","__self","__source","fileName","lineNumber","columnNumber","prepareAttributes","View","map","att","style","styles","atr","variations","TouchableOpacity","onPress","viewClear","Text","h6","colorThird","React","Component","StyleSheet","create","position","top","right","marginBottom","margin","large","_default","exports"],"sources":["/home/ahmed/Music/softtag/Source Code/src/screens/shop/product/ProductVariable.js"],"sourcesContent":["import React from 'react';\nimport {fromJS, Map} from 'immutable';\nimport {\n  StyleSheet,\n  View,\n  ActivityIndicator,\n  TouchableOpacity,\n} from 'react-native';\nimport {Text} from 'src/components';\nimport AttributeVariable from './AttributeVariable';\n\nimport {\n  prepareAttributes,\n  findVariation,\n  prepareMetaData,\n} from 'src/modules/product/helper';\nimport {margin} from 'src/components/config/spacing';\n\nclass ProductVariable extends React.Component {\n  handleChange = meta_data => {\n    const {\n      productAttributes,\n      productVariations,\n      selectVariation,\n      updateMetaVariation,\n    } = this.props;\n    const attributes = productAttributes.filter(attr => attr.get('variation'));\n    // get variation id when all attribute selected\n    if (meta_data.size && attributes.size === meta_data.size) {\n      const find = findVariation(productVariations, prepareMetaData(meta_data));\n      if (find) {\n        selectVariation(find.get('id'));\n      }\n    }\n    updateMetaVariation(meta_data.toJS());\n    // onChange('meta_data', meta_data);\n  };\n\n  onClear = () => {\n    const {selectVariation, updateMetaVariation} = this.props;\n    // onChange('meta_data', meta_data.clear());\n    // onChange('variation', Map());\n    updateMetaVariation([]);\n    selectVariation(0);\n  };\n\n  /**\n   * Select attribute option\n   * @param attribute_id: attribute id\n   * @param attribute_name: attribute name\n   * @param attribute_option: attribute option\n   */\n  onSelectAttribute = (\n    attribute_id,\n    attribute_name,\n    attribute_key,\n    attribute_option,\n  ) => {\n    // console.log('test', attribute_id, attribute_name, attribute_key,  attribute_option)\n    const {meta_data} = this.props;\n    const option = Map({\n      id: attribute_id,\n      name: attribute_name,\n      key: attribute_key,\n      option: attribute_option,\n    });\n    // Get index option in meta data\n    const index = meta_data.findIndex(\n      attr =>\n        attr.get('id') === attribute_id && attr.get('name') === attribute_name,\n    );\n\n    // Already exist in meta data\n    if (index >= 0 && meta_data.includes(option)) {\n      this.handleChange(meta_data.delete(index));\n    } else if (index >= 0) {\n      // else replace attribute\n      this.handleChange(meta_data.set(index, option));\n    } else {\n      this.handleChange(meta_data.push(option));\n    }\n  };\n\n  render() {\n    const {\n      meta_data,\n      productAttributes,\n      productVariations,\n      attribute,\n      loading,\n    } = this.props;\n\n    if (loading) {\n      return <ActivityIndicator />;\n    }\n    // Prepare attributes\n    const attributes = prepareAttributes(\n      productAttributes.filter(attr => attr.get('variation')),\n      attribute,\n      productVariations,\n    );\n\n    return (\n      <View>\n        {attributes.map((att, index) => (\n          <View\n            key={`${att.get('id')}-${att.get('position')}`}\n            style={index < attributes.size - 1 && styles.atr}>\n            <AttributeVariable\n              meta_data={prepareMetaData(meta_data)}\n              attribute={att}\n              variations={productVariations}\n              onSelectAttribute={this.onSelectAttribute}\n            />\n          </View>\n        ))}\n        <TouchableOpacity onPress={this.onClear} style={styles.viewClear}>\n          <Text h6 colorThird>\n            Clear\n          </Text>\n        </TouchableOpacity>\n      </View>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  viewClear: {\n    position: 'absolute',\n    top: 1,\n    right: 0,\n  },\n  atr: {\n    marginBottom: margin.large,\n  },\n});\n\nexport default ProductVariable;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}