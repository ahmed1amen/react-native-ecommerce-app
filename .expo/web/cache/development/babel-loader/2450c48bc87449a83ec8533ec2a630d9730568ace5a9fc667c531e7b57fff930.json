{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.initState = void 0;\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\nvar _immutable = require(\"immutable\");\nvar Actions = _interopRequireWildcard(require(\"./constants\"));\nvar _constants2 = require(\"/home/ahmed/Music/softtag/Source Code/src/modules/cart/constants\");\nvar _config = require(\"/home/ahmed/Music/softtag/Source Code/src/modules/auth/config\");\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\nvar initState = (0, _immutable.fromJS)({\n  shipping_methods: {\n    loading: false,\n    data: [],\n    error: null\n  },\n  chosen_methods: {},\n  payment_method: '',\n  customer_note: '',\n  isDifferentAddress: false,\n  shipping: _config.shippingAddressInit,\n  billing: _config.billingAddressInit,\n  update_order: {\n    loading: false,\n    nonce: ''\n  },\n  checkout: {\n    loading: false,\n    redirect: '',\n    result: ''\n  }\n});\nexports.initState = initState;\nfunction checkoutReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initState;\n  var _ref = arguments.length > 1 ? arguments[1] : undefined,\n    type = _ref.type,\n    payload = _ref.payload,\n    error = _ref.error;\n  switch (type) {\n    case Actions.GET_SHIPPING_METHODS:\n      return state.setIn(['shipping_methods', 'loading'], true);\n    case Actions.GET_SHIPPING_METHODS_SUCCESS:\n      return state.set('shipping_methods', (0, _immutable.fromJS)({\n        data: payload.data,\n        loading: false,\n        error: null\n      })).set('chosen_methods', (0, _immutable.fromJS)(payload.chosen_methods));\n    case Actions.GET_SHIPPING_METHODS_ERROR:\n      return state.setIn(['shipping_methods', 'loading'], false);\n    case Actions.CHANGE_CHOSEN_METHOD:\n      return state.setIn(['chosen_methods', payload.key], payload.value);\n    case Actions.CHANGE_CUSTOMER_NOTE:\n      return state.set('customer_note', payload);\n    case Actions.UPDATE_ADDRESS:\n      var shipping = state.get('shipping');\n      var billing = state.get('billing');\n      var shippingUpdate = payload != null && payload.shipping ? (0, _extends2.default)({}, shipping.toJS(), payload.shipping) : shipping.toJS();\n      var billingUpdate = payload != null && payload.billing ? (0, _extends2.default)({}, billing.toJS(), payload.billing) : billing.toJS();\n      return state.set('shipping', (0, _immutable.fromJS)(shippingUpdate)).set('billing', (0, _immutable.fromJS)(billingUpdate));\n    case Actions.SELECT_PAYMENT_METHOD:\n      return state.set('payment_method', payload);\n    case Actions.CHANGE_DIFFERENT_ADDRESS:\n      return state.set('isDifferentAddress', payload);\n    case Actions.UPDATE_ORDER_REVIEW:\n      return state.setIn(['update_order', 'loading'], true);\n    case Actions.UPDATE_ORDER_REVIEW_ERROR:\n      return state.setIn(['update_order', 'loading'], false).setIn(['update_order', 'error'], error);\n    case Actions.UPDATE_ORDER_REVIEW_SUCCESS:\n      return state.setIn(['update_order', 'loading'], false).setIn(['update_order', 'nonce'], payload.nonce);\n    case Actions.CHECKOUT:\n      return state.setIn(['checkout', 'loading'], true);\n    case Actions.CHECKOUT_ERROR:\n      return state.setIn(['checkout', 'loading'], false).setIn(['checkout', 'error'], error);\n    case Actions.CHECKOUT_SUCCESS:\n      return state.setIn(['checkout', 'loading'], false).setIn(['checkout', 'result'], payload.result).setIn(['checkout', 'redirect'], payload.redirect);\n    case _constants2.CLEAR_CART:\n      return initState;\n    default:\n      return state;\n  }\n}\nvar _default = checkoutReducer;\nexports.default = _default;","map":{"version":3,"names":["_immutable","require","Actions","_interopRequireWildcard","_constants2","_config","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","initState","fromJS","shipping_methods","loading","data","error","chosen_methods","payment_method","customer_note","isDifferentAddress","shipping","shippingAddressInit","billing","billingAddressInit","update_order","nonce","checkout","redirect","result","exports","checkoutReducer","state","arguments","length","undefined","_ref","type","payload","GET_SHIPPING_METHODS","setIn","GET_SHIPPING_METHODS_SUCCESS","GET_SHIPPING_METHODS_ERROR","CHANGE_CHOSEN_METHOD","value","CHANGE_CUSTOMER_NOTE","UPDATE_ADDRESS","shippingUpdate","_extends2","toJS","billingUpdate","SELECT_PAYMENT_METHOD","CHANGE_DIFFERENT_ADDRESS","UPDATE_ORDER_REVIEW","UPDATE_ORDER_REVIEW_ERROR","UPDATE_ORDER_REVIEW_SUCCESS","CHECKOUT","CHECKOUT_ERROR","CHECKOUT_SUCCESS","CLEAR_CART","_default"],"sources":["/home/ahmed/Music/softtag/Source Code/src/modules/checkout/reducer.js"],"sourcesContent":["import {fromJS} from 'immutable';\nimport * as Actions from './constants';\nimport {CLEAR_CART} from 'src/modules/cart/constants';\nimport {shippingAddressInit, billingAddressInit} from 'src/modules/auth/config';\n\nexport const initState = fromJS({\n  shipping_methods: {\n    loading: false,\n    data: [],\n    error: null,\n  },\n  chosen_methods: {},\n  payment_method: '',\n  customer_note: '',\n  isDifferentAddress: false,\n  shipping: shippingAddressInit,\n  billing: billingAddressInit,\n  update_order: {\n    loading: false,\n    nonce: '',\n  },\n  checkout: {\n    loading: false,\n    redirect: '',\n    result: '',\n  },\n});\n\nfunction checkoutReducer(state = initState, {type, payload, error}) {\n  switch (type) {\n    case Actions.GET_SHIPPING_METHODS:\n      return state.setIn(['shipping_methods', 'loading'], true);\n\n    case Actions.GET_SHIPPING_METHODS_SUCCESS:\n      return state\n        .set(\n          'shipping_methods',\n          fromJS({\n            data: payload.data,\n            loading: false,\n            error: null,\n          }),\n        )\n        .set('chosen_methods', fromJS(payload.chosen_methods));\n    case Actions.GET_SHIPPING_METHODS_ERROR:\n      return state.setIn(['shipping_methods', 'loading'], false);\n    case Actions.CHANGE_CHOSEN_METHOD:\n      return state.setIn(['chosen_methods', payload.key], payload.value);\n    case Actions.CHANGE_CUSTOMER_NOTE:\n      return state.set('customer_note', payload);\n    case Actions.UPDATE_ADDRESS:\n      const shipping = state.get('shipping');\n      const billing = state.get('billing');\n      const shippingUpdate = payload?.shipping\n        ? {\n            ...shipping.toJS(),\n            ...payload.shipping,\n          }\n        : shipping.toJS();\n      const billingUpdate = payload?.billing\n        ? {\n            ...billing.toJS(),\n            ...payload.billing,\n          }\n        : billing.toJS();\n      return state\n        .set('shipping', fromJS(shippingUpdate))\n        .set('billing', fromJS(billingUpdate));\n    case Actions.SELECT_PAYMENT_METHOD:\n      return state.set('payment_method', payload);\n    case Actions.CHANGE_DIFFERENT_ADDRESS:\n      return state.set('isDifferentAddress', payload);\n    case Actions.UPDATE_ORDER_REVIEW:\n      return state.setIn(['update_order', 'loading'], true);\n\n    case Actions.UPDATE_ORDER_REVIEW_ERROR:\n      return state\n        .setIn(['update_order', 'loading'], false)\n        .setIn(['update_order', 'error'], error);\n\n    case Actions.UPDATE_ORDER_REVIEW_SUCCESS:\n      return state\n        .setIn(['update_order', 'loading'], false)\n        .setIn(['update_order', 'nonce'], payload.nonce);\n    case Actions.CHECKOUT:\n      return state.setIn(['checkout', 'loading'], true);\n\n    case Actions.CHECKOUT_ERROR:\n      return state\n        .setIn(['checkout', 'loading'], false)\n        .setIn(['checkout', 'error'], error);\n\n    case Actions.CHECKOUT_SUCCESS:\n      return state\n        .setIn(['checkout', 'loading'], false)\n        .setIn(['checkout', 'result'], payload.result)\n        .setIn(['checkout', 'redirect'], payload.redirect);\n    case CLEAR_CART:\n      return initState;\n    default:\n      return state;\n  }\n}\n\nexport default checkoutReducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}