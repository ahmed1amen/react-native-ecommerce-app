{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\nvar _immutable = require(\"immutable\");\nvar _global = _interopRequireDefault(require(\"./global\"));\nvar _api = _interopRequireDefault(require(\"../config/api\"));\nvar get = function get(url) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return new Promise(function (resolve, reject) {\n    var baseURL = _api.default.API_ENDPOINT + '/wp-json' + url;\n    var isWC = url.indexOf('/wc') === 0;\n    var isQuery = url.indexOf('?') >= 0;\n    var isAuth = url.indexOf('/mobile-builder') === 0 || url.indexOf('/dokan') === 0;\n    if (isWC) {\n      baseURL = \"\" + baseURL + (isQuery ? '&' : '?') + \"consumer_key=\" + _api.default.CONSUMER_KEY + \"&consumer_secret=\" + _api.default.CONSUMER_SECRET;\n    }\n    fetch(baseURL, (0, _extends2.default)({}, options, {\n      method: 'GET',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n        Authorization: isAuth && _global.default.getToken() ? \"Bearer \" + _global.default.getToken() : undefined\n      }\n    })).then(function (res) {\n      return res.json();\n    }).then(function (data) {\n      if (data.code) {\n        reject(new Error(data.message));\n      } else {\n        resolve(data);\n      }\n    }).catch(function (error) {\n      return error;\n    });\n  });\n};\nvar post = function post(url, data) {\n  var method = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'POST';\n  return new Promise(function (resolve, reject) {\n    if ((0, _immutable.isImmutable)(data)) {\n      data = data.toJS();\n    }\n    var baseURL = _api.default.API_ENDPOINT + '/wp-json' + url;\n    var isWC = url.indexOf('/wc') === 0;\n    var isDigits = url.indexOf('/digits') === 0;\n    var isQuery = url.indexOf('?') >= 0;\n    var isAuth = url.indexOf('/mobile-builder') === 0 || url.indexOf('/dokan') === 0;\n    if (isWC || isDigits) {\n      baseURL = \"\" + baseURL + (isQuery ? '&' : '?') + \"consumer_key=\" + _api.default.CONSUMER_KEY + \"&consumer_secret=\" + _api.default.CONSUMER_SECRET;\n    }\n    fetch(baseURL, {\n      method: method,\n      headers: {\n        Accept: 'application/json',\n        Authorization: isAuth && _global.default.getToken() ? \"Bearer \" + _global.default.getToken() : null,\n        'Content-Type': isDigits ? 'application/x-www-form-urlencoded;charset=UTF-8' : 'application/json'\n      },\n      body: isDigits ? data : typeof data === 'object' ? JSON.stringify(data) : null\n    }).then(function (res) {\n      return res.json();\n    }).then(function (result) {\n      if (result.code) {\n        if (isDigits && (result.code === '1' || result.code === 1)) {\n          resolve(result);\n        } else {\n          reject(new Error(result.message));\n        }\n      } else {\n        resolve(result);\n      }\n    }).catch(function (error) {\n      reject(error);\n    });\n  });\n};\nvar _default = {\n  get: get,\n  post: post,\n  put: function put(url, data) {\n    return post(url, data, 'PUT');\n  }\n};\nexports.default = _default;","map":{"version":3,"names":["_immutable","require","_global","_interopRequireDefault","_api","get","url","options","arguments","length","undefined","Promise","resolve","reject","baseURL","configApi","API_ENDPOINT","isWC","indexOf","isQuery","isAuth","CONSUMER_KEY","CONSUMER_SECRET","fetch","_extends2","default","method","headers","Accept","Authorization","globalConfig","getToken","then","res","json","data","code","Error","message","catch","error","post","isImmutable","toJS","isDigits","body","JSON","stringify","result","_default","put","exports"],"sources":["/home/ahmed/Music/softtag/Source Code/src/utils/fetch.js"],"sourcesContent":["import {isImmutable} from 'immutable';\n\nimport globalConfig from './global';\nimport configApi from '../config/api';\n\n/**\n * Get method\n * @param url\n * @returns {Promise<R>}\n */\nconst get = (url, options = {}) => {\n  return new Promise((resolve, reject) => {\n    let baseURL = configApi.API_ENDPOINT + '/wp-json' + url;\n\n    const isWC = url.indexOf('/wc') === 0;\n    const isQuery = url.indexOf('?') >= 0;\n    const isAuth =\n      url.indexOf('/mobile-builder') === 0 || url.indexOf('/dokan') === 0;\n\n    if (isWC) {\n      baseURL = `${baseURL}${isQuery ? '&' : '?'}consumer_key=${\n        configApi.CONSUMER_KEY\n      }&consumer_secret=${configApi.CONSUMER_SECRET}`;\n    }\n\n    fetch(baseURL, {\n      ...options,\n      method: 'GET',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n        Authorization:\n          isAuth && globalConfig.getToken()\n            ? `Bearer ${globalConfig.getToken()}`\n            : undefined,\n      },\n    })\n      .then(res => res.json())\n      .then(data => {\n        if (data.code) {\n          reject(new Error(data.message));\n        } else {\n          resolve(data);\n        }\n      })\n      .catch(error => {\n        return error;\n      });\n  });\n};\n\n/**\n * Post method\n * @param url\n * @param data\n * @param method\n * @returns {Promise<R>}\n */\nconst post = (url, data, method = 'POST') => {\n  return new Promise((resolve, reject) => {\n    // To JS Object\n    if (isImmutable(data)) {\n      data = data.toJS();\n    }\n\n    let baseURL = configApi.API_ENDPOINT + '/wp-json' + url;\n\n    const isWC = url.indexOf('/wc') === 0;\n    const isDigits = url.indexOf('/digits') === 0;\n    const isQuery = url.indexOf('?') >= 0;\n    const isAuth =\n      url.indexOf('/mobile-builder') === 0 || url.indexOf('/dokan') === 0;\n\n    if (isWC || isDigits) {\n      baseURL = `${baseURL}${isQuery ? '&' : '?'}consumer_key=${\n        configApi.CONSUMER_KEY\n      }&consumer_secret=${configApi.CONSUMER_SECRET}`;\n    }\n\n    fetch(baseURL, {\n      method: method,\n      headers: {\n        Accept: 'application/json',\n        Authorization:\n          isAuth && globalConfig.getToken()\n            ? `Bearer ${globalConfig.getToken()}`\n            : null,\n        'Content-Type': isDigits\n          ? 'application/x-www-form-urlencoded;charset=UTF-8'\n          : 'application/json',\n      },\n      body: isDigits\n        ? data\n        : typeof data === 'object'\n        ? JSON.stringify(data)\n        : null,\n    })\n      .then(res => res.json())\n      .then(result => {\n        if (result.code) {\n          if (isDigits && (result.code === '1' || result.code === 1)) {\n            resolve(result);\n          } else {\n            reject(new Error(result.message));\n          }\n        } else {\n          resolve(result);\n        }\n      })\n      .catch(error => {\n        reject(error);\n      });\n  });\n};\n\nexport default {\n  get,\n  post,\n  put: (url, data) => post(url, data, 'PUT'),\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}